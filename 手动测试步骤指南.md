# 陪玩应用手动测试步骤指南

## 环境准备

### 1. 后端环境准备
```bash
# 1. 检查Java环境
java -version

# 2. 检查Maven环境
mvn -version

# 3. 启动MySQL数据库（确保服务运行）
# 默认配置：localhost:3306，用户名root，密码123456

# 4. 创建数据库（如果不存在）
mysql -u root -p123456 -e "CREATE DATABASE IF NOT EXISTS playmate_db CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;"

# 5. 导入数据库初始化脚本
mysql -u root -p123456 playmate_db < database/init.sql
```

### 2. 前端环境准备
```bash
# 1. 检查Flutter环境
flutter doctor

# 2. 进入前端目录
cd frontend

# 3. 获取依赖
flutter pub get

# 4. 构建Web版本（推荐）
flutter build web
```

## 启动应用

### 1. 启动后端服务
```bash
# 进入后端目录
cd backend

# 启动Spring Boot应用
mvn spring-boot:run

# 或者使用IDE直接运行 PlaymateApplication.java
```

**预期结果**：
- 应用在 http://localhost:8888 启动
- 控制台显示启动成功信息
- 数据库表自动创建（如果不存在）

### 2. 启动前端应用
```bash
# 方式1：Web版本（推荐）
cd frontend
flutter run -d chrome

# 方式2：桌面版本
flutter run -d windows

# 方式3：使用构建的Web版本
cd build/web
# 使用任何Web服务器启动该目录
```

## 功能测试步骤

### 1. 用户注册和登录测试

#### 1.1 注册新用户
**操作步骤**：
1. 打开前端应用
2. 点击"注册"按钮
3. 填写注册信息：
   - 用户名：testuser
   - 手机号：13800138888
   - 密码：Test123456!
   - 确认密码：Test123456!
   - 昵称：测试用户
4. 点击"注册"按钮

**预期结果**：
- 注册成功提示
- 自动跳转到登录页面
- 后端数据库中新增用户记录

#### 1.2 用户登录
**操作步骤**：
1. 在登录页面输入：
   - 用户名：testuser
   - 密码：Test123456!
2. 点击"登录"按钮

**预期结果**：
- 登录成功
- 跳转到主页
- 显示用户信息

#### 1.3 管理员登录
**操作步骤**：
1. 使用管理员账号登录：
   - 用户名：admin
   - 密码：Admin123456!
2. 验证管理员权限

**预期结果**：
- 登录成功
- 显示管理后台功能

### 2. 陪玩服务测试

#### 2.1 浏览陪玩达人
**操作步骤**：
1. 登录后进入"找陪玩"页面
2. 浏览陪玩达人列表
3. 点击某个达人查看详情

**预期结果**：
- 显示陪玩达人列表
- 显示达人详细信息
- 显示服务价格和介绍

#### 2.2 创建订单
**操作步骤**：
1. 选择一个陪玩达人
2. 选择服务类型（如：王者荣耀）
3. 设置服务时长：60分钟
4. 点击"立即下单"
5. 在确认页面确认支付

**预期结果**：
- 订单创建成功
- 显示订单详情
- 用户钱包余额减少

### 3. 聊天功能测试

#### 3.1 发送文字消息
**操作步骤**：
1. 进入聊天页面
2. 选择一个联系人
3. 在输入框输入文字消息
4. 点击发送

**预期结果**：
- 消息发送成功
- 对方能收到消息
- 消息显示在聊天记录中

#### 3.2 语音通话
**操作步骤**：
1. 在聊天页面点击语音通话按钮
2. 等待对方接听
3. 进行语音通话
4. 结束通话

**预期结果**：
- 成功发起语音通话
- 语音质量正常
- 通话结束后显示通话记录

#### 3.3 视频通话
**操作步骤**：
1. 在聊天页面点击视频通话按钮
2. 等待对方接听
3. 进行视频通话
4. 结束通话

**预期结果**：
- 成功发起视频通话
- 视频画面清晰
- 音频同步正常

### 4. 社区功能测试

#### 4.1 发布动态
**操作步骤**：
1. 进入社区页面
2. 点击"发布动态"
3. 填写动态内容：
   - 文字：今天玩得很开心！
   - 添加图片（可选）
4. 点击"发布"

**预期结果**：
- 动态发布成功
- 显示在动态列表中
- 可以看到点赞和评论

#### 4.2 互动功能
**操作步骤**：
1. 点击他人的动态
2. 点击点赞按钮
3. 写评论：很棒！
4. 点击关注用户

**预期结果**：
- 点赞成功
- 评论发布成功
- 关注关系建立

### 5. 支付功能测试

#### 5.1 充值测试
**操作步骤**：
1. 进入"我的钱包"
2. 点击"充值"
3. 选择充值金额：100元
4. 选择支付方式（模拟）
5. 确认支付

**预期结果**：
- 充值成功
- 钱包余额增加
- 生成充值记录

#### 5.2 提现测试
**操作步骤**：
1. 进入"我的钱包"
2. 点击"提现"
3. 输入提现金额：50元
4. 选择提现方式
5. 确认提现

**预期结果**：
- 提现申请提交成功
- 钱包冻结金额增加
- 生成提现记录

### 6. 管理功能测试

#### 6.1 用户管理
**操作步骤**：
1. 使用管理员账号登录
2. 进入"用户管理"
3. 查看用户列表
4. 点击某个用户查看详情
5. 尝试禁用用户

**预期结果**：
- 显示用户列表
- 显示用户详细信息
- 成功禁用/启用用户

#### 6.2 内容审核
**操作步骤**：
1. 进入"内容审核"
2. 查看待审核动态
3. 审核某个动态
4. 选择通过或拒绝

**预期结果**：
- 显示待审核内容
- 成功审核内容
- 状态更新正确

## API接口测试

### 1. 游戏分类接口
```bash
# 测试获取游戏分类
curl -X GET http://localhost:8888/api/game-categories

# 预期结果：返回游戏分类列表
```

### 2. 用户认证接口
```bash
# 测试用户登录
curl -X POST http://localhost:8888/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username":"admin","password":"Admin123456!"}'

# 预期结果：返回JWT token
```

### 3. 用户信息接口
```bash
# 获取当前用户信息（需要token）
curl -X GET http://localhost:8888/api/user/info \
  -H "Authorization: Bearer YOUR_JWT_TOKEN"

# 预期结果：返回用户详细信息
```

## 性能测试

### 1. 并发测试
```bash
# 使用ab工具进行并发测试
ab -n 1000 -c 10 http://localhost:8888/api/game-categories

# 预期结果：成功率99%以上，响应时间<500ms
```

### 2. 数据库性能
```bash
# 查看数据库连接数
SHOW PROCESSLIST;

# 查看慢查询
SHOW VARIABLES LIKE 'slow_query_log';
```

## 错误场景测试

### 1. 网络异常
- 断开网络连接，测试离线功能
- 网络恢复后，测试数据同步

### 2. 服务器异常
- 关闭后端服务，测试前端错误处理
- 重启服务，测试重连机制

### 3. 数据异常
- 输入非法数据，测试验证机制
- 删除重要数据，测试容错能力

## 测试检查清单

### ✅ 基础功能
- [ ] 用户注册登录
- [ ] 个人信息管理
- [ ] 密码修改

### ✅ 核心业务
- [ ] 陪玩达人展示
- [ ] 订单创建和管理
- [ ] 支付流程
- [ ] 钱包功能

### ✅ 通信功能
- [ ] 文字聊天
- [ ] 语音通话
- [ ] 视频通话
- [ ] 消息历史

### ✅ 社区功能
- [ ] 动态发布
- [ ] 点赞评论
- [ ] 关注系统
- [ ] 搜索功能

### ✅ 管理功能
- [ ] 用户管理
- [ ] 内容审核
- [ ] 数据统计
- [ ] 系统设置

### ✅ 性能和稳定性
- [ ] 响应时间<2秒
- [ ] 并发用户支持
- [ ] 内存使用正常
- [ ] 错误处理完善

## 常见问题解决

### 1. 后端启动失败
- 检查数据库连接配置
- 确认端口8888未被占用
- 查看日志文件排查错误

### 2. 前端编译错误
- 运行 `flutter clean` 清理缓存
- 运行 `flutter pub get` 重新获取依赖
- 检查Flutter版本兼容性

### 3. 数据库连接失败
- 确认MySQL服务启动
- 检查用户名密码正确
- 确认数据库存在

### 4. WebSocket连接失败
- 检查防火墙设置
- 确认WebSocket端口开放
- 查看网络连接状态

## 测试报告模板

```markdown
# 测试报告

**测试时间**：
**测试环境**：
**测试人员**：

### 测试结果总结
- 通过测试项：XX项
- 失败测试项：XX项
- 问题列表：
  1. 问题描述
  2. 问题描述

### 建议改进
1. 改进建议
2. 改进建议
```

---

**注意**：请在测试过程中记录遇到的问题和异常，及时反馈给开发团队进行修复。